### **–ò—Å—Ç–æ—Ä–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–æ–≥–≥–µ—Ä–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–µ**

–ù–∞ –ø—Ä–æ–µ–∫—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–≥—Ä–∞–ª–æ **–∫–ª—é—á–µ–≤—É—é —Ä–æ–ª—å** –¥–ª—è **–æ—Ç–ª–∞–¥–∫–∏, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –æ—à–∏–±–∫–∏**.

#### **1. –í—ã–±–æ—Ä –ª–æ–≥–≥–µ—Ä–∞**

–ú—ã —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏ **Logrus –∏ Zap**, –Ω–æ –≤—ã–±—Ä–∞–ª–∏ **Zap**, —Ç–∞–∫ –∫–∞–∫ –æ–Ω:  
‚úî –ë—ã—Å—Ç—Ä–µ–µ (zero-allocation, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π overhead).  
‚úî –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ **JSON**.  
‚úî –•–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏.

---

#### **2. –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–ª–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ?**

1. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥—è—â–∏—Ö HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤**
    
    - –î–æ–±–∞–≤–∏–ª–∏ middleware, –∫–æ—Ç–æ—Ä–∞—è —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç `–º–µ—Ç–æ–¥`, `–ø—É—Ç—å`, `—Å—Ç–∞—Ç—É—Å`, `–≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞`.
    - –ü–æ–º–æ–≥–∞–ª–æ **–≤–∏–¥–µ—Ç—å –∑–∞–º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** –∏ **—Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏**.
    - –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ **/auth/login** —Ä–µ–∑–∫–æ –∑–∞–º–µ–¥–ª–∏–ª—Å—è, –º—ã –º–æ–≥–ª–∏ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã.
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫**
    
    - –õ—é–±–∞—è –æ—à–∏–±–∫–∞ –≤ —Å–µ—Ä–≤–∏—Å–µ –∑–∞–ø–∏—Å—ã–≤–∞–ª–∞—Å—å —Å **–¥–µ—Ç–∞–ª—è–º–∏ (stacktrace, user_id, query, response)**.
    - –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –±–∞–∑–∞ **–æ—Ç–≤–∞–ª–∏–ª–∞—Å—å**, –≤ –ª–æ–≥–µ —Å—Ä–∞–∑—É –≤–∏–¥–Ω–æ **SQL-–∑–∞–ø—Ä–æ—Å –∏ –æ—à–∏–±–∫—É**.
3. **–¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π —Å `trace_id`**
    
    - –ö–∞–∂–¥–æ–º—É –∑–∞–ø—Ä–æ—Å—É –¥–æ–±–∞–≤–ª—è–ª–∏ **—É–Ω–∏–∫–∞–ª—å–Ω—ã–π `trace_id`**, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏.
    - –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –∂–∞–ª—É–µ—Ç—Å—è, —á—Ç–æ "–Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç", –º—ã –∏—Å–∫–∞–ª–∏ **–ø–æ trace_id –∏ –≤–∏–¥–µ–ª–∏ –≤–µ—Å—å –ø—É—Ç—å –∑–∞–ø—Ä–æ—Å–∞** —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É.
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π**
    
    - –ú—ã —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª–∏ —Ä–∞–±–æ—Ç—É **–≥–æ—Ä—É—Ç–∏–Ω**, —á—Ç–æ–±—ã **–æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å deadlock‚Äô–∏ –∏ –≥–æ–Ω–∫–∏ –¥–∞–Ω–Ω—ã—Ö**.
    - –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ **–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è** –±—ã–ª–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î, –∏ –µ—Å–ª–∏ –≥–¥–µ-—Ç–æ –±—ã–ª–∞ **–≥–æ–Ω–∫–∞** ‚Äì –≤ –ª–æ–≥–∞—Ö —Å—Ä–∞–∑—É –≤–∏–¥–Ω–æ.

---

#### **3. –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–∏–ª–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

‚úÖ **–ë—ã—Å—Ç—Ä–æ–µ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –≤ –ø—Ä–æ–¥–µ**

- –î–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è Zap –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å **–ª–æ–≥–∏–Ω–∏—Ç—å –≤—Å—ë –≤—Ä—É—á–Ω—É—é**.
- –ü–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ‚Äì **–ª–µ–≥–∫–æ –Ω–∞—Ö–æ–¥–∏–ª–∏ –æ—à–∏–±–∫–∏** –ø–æ user_id / trace_id.

‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è API-–∑–∞–ø—Ä–æ—Å–æ–≤**

- –ß–µ—Ä–µ–∑ –ª–æ–≥–∏ **–≤–∏–¥–µ–ª–∏ –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –∏—Ö.
- –ù–∞–ø—Ä–∏–º–µ—Ä, –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ —Ä–∞–Ω—å—à–µ **–∑–∞–Ω–∏–º–∞–ª 1.2 —Å–µ–∫—É–Ω–¥—ã**, –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ ‚Äì **85 –º—Å**.

‚úÖ **–ê–Ω–∞–ª–∏–∑ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö —Å–±–æ–µ–≤**

- –ù–∞–ø—Ä–∏–º–µ—Ä, **–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ Kafka –∑–∞–≤–∏—Å–∞–ª–∏** ‚Üí –∑–∞–ø—É—Å—Ç–∏–ª–∏ —Å–µ—Ä–≤–∏—Å —Å Debug-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º, —É–≤–∏–¥–µ–ª–∏, —á—Ç–æ –ø—Ä–∏—á–∏–Ω–∞ –≤ **race condition**.

---

#### **4. –ö–∞–∫–∏–µ –æ—à–∏–±–∫–∏ –≤—ã—è–≤–∏–ª–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è –ª–æ–≥–∞–º?**

1Ô∏è‚É£ **–ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–µ—à–µ–º Redis**

- –í –ª–æ–≥–∞—Ö –∑–∞–º–µ—Ç–∏–ª–∏ **–ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –æ—à–∏–±–∫–∏ —Ç–∞–π–º–∞—É—Ç–∞** –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –∫–µ—à–∞.
- –û–∫–∞–∑–∞–ª–æ—Å—å, **–∏–Ω–æ–≥–¥–∞ –∑–∞–ø—Ä–æ—Å—ã –≤ Redis —É—Ö–æ–¥–∏–ª–∏ –≤ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É** –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `sync.Mutex`.

2Ô∏è‚É£ **–ê–Ω–æ–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î**

- –í –ª–æ–≥–∞—Ö —É–≤–∏–¥–µ–ª–∏ **–æ–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞**.
- –û–∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ **–Ω–µ —Ä–∞–±–æ—Ç–∞–ª –∫–µ—à, –∏ —Å–µ—Ä–≤–∏—Å —Ö–æ–¥–∏–ª –≤ –±–∞–∑—É –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å**.

3Ô∏è‚É£ **–ì–æ–Ω–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –≥–æ—Ä—É—Ç–∏–Ω–∞—Ö**

- –í –ª–æ–≥–∞—Ö –Ω–∞—à–ª–∏ **–∫–æ–Ω—Ñ–ª–∏–∫—Ç –∑–∞–ø–∏—Å–µ–π –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è**.
- –î–æ–±–∞–≤–∏–ª–∏ **–º—å—é—Ç–µ–∫—Å—ã –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫.

---

### **–í—ã–≤–æ–¥**

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ **Zap** –∫–∞–∫ **–æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–≥–µ—Ä** –≤ –ø—Ä–æ–µ–∫—Ç–µ.
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–º–æ–≥–ª–æ **–Ω–∞–π—Ç–∏ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏**.
- **–õ–æ–≥–∏—Ä–æ–≤–∞–ª–∏ –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã, –æ—à–∏–±–∫–∏, –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É**.
- **–õ–æ–≥–∏ —Å–∏–ª—å–Ω–æ —É–ø—Ä–æ—Å—Ç–∏–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –æ—Ç–ª–∞–¥–∫—É –∫–æ–¥–∞ –≤ –ø—Ä–æ–¥–µ**.

üöÄ **–ï—Å–ª–∏ –Ω—É–∂–Ω—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∫–µ–π—Å—ã –∏–ª–∏ –¥–µ—Ç–∞–ª–∏ ‚Äì —É—Ç–æ—á–Ω—è–π!**